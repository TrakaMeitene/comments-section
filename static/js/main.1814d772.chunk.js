(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(9),o=(n(23),n(3)),s=(n(24),n(0)),i=n(7).default;function l(e){var t=e.deletemodal,n=e.commentid,c=e.getalldata;return Object(s.jsx)("div",{className:"mask",children:Object(s.jsxs)("div",{className:"modal",children:[Object(s.jsx)("h3",{children:"Delete comment"}),Object(s.jsx)("p",{children:"Are you sure you want to delete this comment? This will remove the comment and can't be undone"}),Object(s.jsxs)("span",{children:[Object(s.jsx)("button",{className:"cancel",onClick:function(){t(!1)},children:"NO,CANCEL"}),Object(s.jsx)("button",{className:"accept",onClick:function(){i.delete("/delete/${commentid}",{data:{id:n}}).then((function(e){return console.log(e.data)})).catch((function(e){console.error("Error:",e)})).then((function(){t(!1),c()}))},children:"YES, DELETE"})]})]})})}var u=n(7).default;function d(e){var t=e.comment,n=e.id,a=e.getAllData,r=e.currentuser,i=e.comments,l=e.deletemodal,j=e.deletefromdb,m=Object(c.useState)(!1),b=Object(o.a)(m,2),h=b[0],f=b[1],O=Object(c.useState)(),g=Object(o.a)(O,2),p=g[0],v=g[1],x=Object(c.useState)(!1),w=Object(o.a)(x,2),y=w[0],D=w[1],N=Object(c.useState)(),S=Object(o.a)(N,2),C=S[0],E=S[1],k=[];Object(c.useEffect)((function(){if(void 0===t||null===t)return""}),[t]);for(var A=0;A<i.length;A++)"0"!==i[A].replyTo&&k.push(i[A]);var M=new Date,T=new Date(t.createdAt),F=M.getFullYear()-T.getFullYear(),_=M.getMonth()-T.getMonth(),L=Math.abs(new Date(t.createdAt).getDate()-(new Date).getDate()),P=Math.abs(new Date(t.createdAt).getHours()-(new Date).getHours()),Y=M.getMinutes()-T.getMinutes(),R=M.getSeconds()-T.getSeconds(),B="";F>0&&F<2?B+=F+"year ago":F>=2?B=F+" years ago":_>0&&_>1?B=_+" months ago":1===_?B=_+" month ago":L>0&&L>1&&Math.floor(L)<7?B=Math.floor(L)+" days ago":1===Math.floor(L)?B=L+" day ago":1===Math.floor(L/7)?B="1 week ago":Math.floor(L/7)>1?B=Math.floor(L/7)+" weeks ago":Y>0&&1===P?B="1 hour ago":P>1&&P<12?B=P+" hours ago":1===P&&Y<0?B=(Y=M.getMinutes()+60-T.getMinutes())+" minutes ago":Y>0&&Y>1?B=Y+" minutes ago":1===Y?B=Y+" minute ago":R>0&&R>1?B=R+" seconds ago":1===R?B=R+" second ago":0===R&&(B="just now");for(var H=function(e){var c=e.target.getAttribute("value");u.put("/score",{id:n,comment:t,type:c}).catch((function(e){alert(e)})).then((function(){a()}))},I=t.user.image.png,J=r[0].username,V=r[0].image.png,U=Object(s.jsxs)("div",{className:"comment-window",children:[Object(s.jsx)("div",{className:"avatar",children:Object(s.jsx)("img",{alt:"avatar",src:V})}),Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=[],c=(i.map((function(e){n.push(e.id)})),n.sort((function(e,t){return e-t}))),o={id:c[c.length-1]+1,content:p,createdAt:new Date,score:0,user:r[0],replyTo:t._id,type:"reply"};u.post("/addcomment",{newcomment:o}).catch((function(e){alert("Error:",e)})).then((function(){f(!1),v(""),a()}))},children:[Object(s.jsx)("textarea",{rows:"3",cols:"12",wrap:"hard",defaultValue:"@"+t.user.username+" ",onChange:function(e){v(e.target.value),e.preventDefault()}}),Object(s.jsx)("input",{type:"submit",value:"REPLY"})]})]}),$=t.content,q=$.split(" "),z="@"===$.split("")[0]?Object(s.jsxs)("p",{children:[Object(s.jsx)("b",{children:q[0]+" "}),$.substring($.indexOf(" ")+1)]}):Object(s.jsx)("p",{children:t.content}),G=[],K=0;K<k.length;K++)for(var Q=K+1;Q<i.length;Q++)k[K]._id===i[Q].replyTo&&G.push(i[Q]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"comment-window",children:[Object(s.jsxs)("div",{className:"vote-count",children:[Object(s.jsx)("img",{alt:"plus",src:"images/icon-plus.svg",onClick:H,value:"plus"}),Object(s.jsx)("p",{children:t.score}),Object(s.jsx)("img",{alt:"minus",src:"images/icon-minus.svg",onClick:H,value:"minus"})]}),Object(s.jsxs)("div",{className:"comment-column",children:[Object(s.jsxs)("div",{className:"comment-header",children:[Object(s.jsx)("img",{alt:"avatar",src:I}),Object(s.jsx)("p",{children:t.user.username}),Object(s.jsx)("span",{className:t.user.username===J?"you":"nodisplay",children:"you"}),Object(s.jsx)("p",{className:"cooment-date",children:B}),t.user.username===J?Object(s.jsxs)("div",{className:"delete",children:[Object(s.jsx)("p",{onClick:function(){l(!0),j(n)},children:"Delete"}),Object(s.jsx)("p",{onClick:function(){D(!0)},children:"Edit"})]}):Object(s.jsx)("p",{className:"reply",onClick:function(e){f(!0)},children:" Reply"})]}),Object(s.jsx)("div",{className:"content",children:y?Object(s.jsxs)("form",{className:"update",onSubmit:function(e){e.preventDefault();var c={_id:n,id:t.id,content:C,createdAt:t.createdAt,score:t.score,user:t.user,replyTo:t.replyTo};u.put("/edit",{params:c}).catch((function(e){alert(e)})).then((function(){a(),D(!1)}))},children:[Object(s.jsx)("textarea",{className:"editable",rows:"2",cols:"10",wrap:"hard",onChange:function(e){e.preventDefault(),E(e.target.value)},defaultValue:t.content}),Object(s.jsx)("input",{type:"submit",value:"UPDATE"})]}):z})]})]}),h?U:"",k.map((function(e){return t._id===e.replyTo?Object(s.jsx)("div",{className:G.includes(e)?"jauna":"repliedTo",children:Object(s.jsx)(d,{comment:e,id:e._id,getAllData:a,currentuser:r,comments:i,deletemodal:l,deletefromdb:j},e.id)},e.id):""}))]})}var j=n(7).default;function m(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),i=Object(o.a)(r,2),u=i[0],m=i[1],b=Object(c.useState)(),h=Object(o.a)(b,2),f=h[0],O=h[1],g=Object(c.useState)(!1),p=Object(o.a)(g,2),v=p[0],x=p[1],w=Object(c.useState)(),y=Object(o.a)(w,2),D=y[0],N=y[1];Object(c.useEffect)((function(){S(),C()}),[]);var S=function(){j.get("https://nodeprojectreact.herokuapp.com/").then((function(e){return m(e.data)})).catch((function(e){console.error("Error:",e)}))},C=function(){j.get("/user",{params:{name:"juliusomo"}}).then((function(e){return a(e.data)})).catch((function(e){console.error("Error:",e)}))},E=Object(c.useCallback)((function(e){x(e)}),[]),k=Object(c.useCallback)((function(e){N(e)}),[]);return void 0===u||null===u||void 0===n[0]||null===n[0]?"":Object(s.jsxs)(s.Fragment,{children:[u.map((function(e){return"0"===e.replyTo?Object(s.jsx)("div",{children:Object(s.jsx)(d,{comment:e,id:e._id,getAllData:S,currentuser:n,comments:u,deletemodal:E,deletefromdb:k},e.id)},e.id):""})),Object(s.jsxs)("div",{className:"comment-window",children:[Object(s.jsx)("div",{className:"avatar",children:Object(s.jsx)("img",{alt:"avatar",src:n[0].image.png})}),Object(s.jsxs)("form",{onSubmit:function(e){var t=e.target[0].value;e.preventDefault();var c=[],a=(u.map((function(e){c.push(e.id)})),c.sort((function(e,t){return e-t}))),r={id:a[a.length-1]+1,content:t,createdAt:new Date,score:0,user:n[0],replyTo:"0"};j.post("/addcomment",{newcomment:r}).catch((function(e){alert("Error:",e)})).then((function(){O(""),S()}))},children:[Object(s.jsx)("textarea",{rows:"3",cols:"10",wrap:"hard",placeholder:"Add a comment...",onChange:function(e){O(e.target.value),e.preventDefault()},value:f}),Object(s.jsx)("input",{type:"submit",value:"SEND"})]})]}),v?Object(s.jsx)(l,{deletemodal:E,commentid:D,getalldata:S}):""]})}n(50);function b(){return Object(s.jsx)(m,{})}var h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),c(e),a(e),r(e),o(e)}))};Object(r.createRoot)(document.getElementById("root")).render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(b,{})})),h()}},[[51,1,2]]]);
//# sourceMappingURL=main.1814d772.chunk.js.map