(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=19},28:function(e,t,n){},29:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),o=n(20),r=n.n(o),s=(n(28),n(3)),i=(n(29),n(0)),u=n(7).default;function l(e){var t=e.deletemodal,n=e.commentid,c=e.getalldata;return Object(i.jsx)("div",{className:"mask",children:Object(i.jsxs)("div",{className:"modal",children:[Object(i.jsx)("h3",{children:"Delete comment"}),Object(i.jsx)("p",{children:"Are you sure you want to delete this comment? This will remove the comment and can't be undone"}),Object(i.jsxs)("span",{children:[Object(i.jsx)("button",{className:"cancel",onClick:function(){t(!1)},children:"NO,CANCEL"}),Object(i.jsx)("button",{className:"accept",onClick:function(){u.delete("https://nodeprojectreact.herokuapp.com/delete/${commentid}",{data:{id:n}}).then((function(e){return console.log(e.data)})).catch((function(e){console.error("Error:",e)})).then((function(){t(!1),c()}))},children:"YES, DELETE"})]})]})})}var d=n.p+"static/media/icon-plus.0037a825.svg",j=n.p+"static/media/icon-minus.4aa6933c.svg",m=n(7).default;function h(e){var t=e.comment,a=e.id,o=e.getAllData,r=e.currentuser,u=e.comments,l=e.deletemodal,p=e.deletefromdb,b=Object(c.useState)(!1),f=Object(s.a)(b,2),O=f[0],g=f[1],v=Object(c.useState)(),x=Object(s.a)(v,2),w=x[0],y=x[1],D=Object(c.useState)(!1),N=Object(s.a)(D,2),k=N[0],E=N[1],C=Object(c.useState)(),S=Object(s.a)(C,2),M=S[0],A=S[1],T=[];Object(c.useEffect)((function(){if(void 0===t||null===t)return""}),[t]);for(var F=0;F<u.length;F++)"0"!==u[F].replyTo&&T.push(u[F]);var _=new Date,L=new Date(t.createdAt),P=_.getFullYear()-L.getFullYear(),Y=_.getMonth()-L.getMonth(),R=Math.abs(new Date(t.createdAt).getDate()-(new Date).getDate()),U=Math.abs(new Date(t.createdAt).getHours()-(new Date).getHours()),B=_.getMinutes()-L.getMinutes(),H=_.getSeconds()-L.getSeconds(),I="";P>0&&P<2?I+=P+"year ago":P>=2?I=P+" years ago":Y>0&&Y>1?I=Y+" months ago":1===Y?I=Y+" month ago":R>0&&R>1&&Math.floor(R)<7?I=Math.floor(R)+" days ago":1===Math.floor(R)?I=R+" day ago":1===Math.floor(R/7)?I="1 week ago":Math.floor(R/7)>1?I=Math.floor(R/7)+" weeks ago":B>0&&1===U?I="1 hour ago":U>1&&U<12?I=U+" hours ago":1===U&&B<0?I=(B=_.getMinutes()+60-L.getMinutes())+" minutes ago":B>0&&B>1?I=B+" minutes ago":1===B?I=B+" minute ago":H>0&&H>1?I=H+" seconds ago":1===H?I=H+" second ago":0===H&&(I="just now");for(var J=function(e){var n=e.target.getAttribute("value");m.put("https://nodeprojectreact.herokuapp.com/score",{id:a,comment:t,type:n}).catch((function(e){alert(e)})).then((function(){o()}))},V=t.user.image.png,$=r[0].username,q=n(19)(r[0].image.png),z=Object(i.jsxs)("div",{className:"comment-window",children:[Object(i.jsx)("div",{className:"avatar",children:Object(i.jsx)("img",{alt:"avatar",src:q})}),Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=[],c=(u.map((function(e){n.push(e.id)})),n.sort((function(e,t){return e-t}))),a={id:c[c.length-1]+1,content:w,createdAt:new Date,score:0,user:r[0],replyTo:t._id,type:"reply"};m.post("https://nodeprojectreact.herokuapp.com/addcomment",{newcomment:a}).catch((function(e){alert("Error:",e)})).then((function(){g(!1),y(""),o()}))},children:[Object(i.jsx)("textarea",{rows:"3",cols:"12",wrap:"hard",defaultValue:"@"+t.user.username+" ",onChange:function(e){y(e.target.value),e.preventDefault()}}),Object(i.jsx)("input",{type:"submit",value:"REPLY"})]})]}),G=t.content,K=G.split(" "),Q="@"===G.split("")[0]?Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:K[0]+" "}),G.substring(G.indexOf(" ")+1)]}):Object(i.jsx)("p",{children:t.content}),W=[],X=0;X<T.length;X++)for(var Z=X+1;Z<u.length;Z++)T[X]._id===u[Z].replyTo&&W.push(u[Z]);return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"comment-window",children:[Object(i.jsxs)("div",{className:"vote-count",children:[Object(i.jsx)("img",{alt:"plus",src:d,onClick:J,value:"plus"}),Object(i.jsx)("p",{children:t.score}),Object(i.jsx)("img",{alt:"minus",src:j,onClick:J,value:"minus"})]}),Object(i.jsxs)("div",{className:"comment-column",children:[Object(i.jsxs)("div",{className:"comment-header",children:[Object(i.jsx)("img",{alt:"avatar",src:V}),Object(i.jsx)("p",{children:t.user.username}),Object(i.jsx)("span",{className:t.user.username===$?"you":"nodisplay",children:"you"}),Object(i.jsx)("p",{className:"cooment-date",children:I}),t.user.username===$?Object(i.jsxs)("div",{className:"delete",children:[Object(i.jsx)("p",{onClick:function(){l(!0),p(a)},children:"Delete"}),Object(i.jsx)("p",{onClick:function(){E(!0)},children:"Edit"})]}):Object(i.jsx)("p",{className:"reply",onClick:function(e){g(!0)},children:" Reply"})]}),Object(i.jsx)("div",{className:"content",children:k?Object(i.jsxs)("form",{className:"update",onSubmit:function(e){e.preventDefault();var n={_id:a,id:t.id,content:M,createdAt:t.createdAt,score:t.score,user:t.user,replyTo:t.replyTo};m.put("https://nodeprojectreact.herokuapp.com/edit",{params:n}).catch((function(e){alert(e)})).then((function(){o(),E(!1)}))},children:[Object(i.jsx)("textarea",{className:"editable",rows:"2",cols:"10",wrap:"hard",onChange:function(e){e.preventDefault(),A(e.target.value)},defaultValue:t.content}),Object(i.jsx)("input",{type:"submit",value:"UPDATE"})]}):Q})]})]}),O?z:"",T.map((function(e){return t._id===e.replyTo?Object(i.jsx)("div",{className:W.includes(e)?"jauna":"repliedTo",children:Object(i.jsx)(h,{comment:e,id:e._id,getAllData:o,currentuser:r,comments:u,deletemodal:l,deletefromdb:p},e.id)},e.id):""}))]})}var p=n(7).default;function b(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),a=t[0],o=t[1],r=Object(c.useState)(),u=Object(s.a)(r,2),d=u[0],j=u[1],m=Object(c.useState)(),b=Object(s.a)(m,2),f=b[0],O=b[1],g=Object(c.useState)(!1),v=Object(s.a)(g,2),x=v[0],w=v[1],y=Object(c.useState)(),D=Object(s.a)(y,2),N=D[0],k=D[1];Object(c.useEffect)((function(){E(),C()}),[]);var E=function(){p.get("https://nodeprojectreact.herokuapp.com").then((function(e){return j(e.data)})).catch((function(e){console.error("Error:",e)}))},C=function(){p.get("https://nodeprojectreact.herokuapp.com/user",{params:{name:"juliusomo"}}).then((function(e){return o(e.data)})).catch((function(e){console.error("Error:",e)}))},S=Object(c.useCallback)((function(e){w(e)}),[]),M=Object(c.useCallback)((function(e){k(e)}),[]);return void 0===d||null===d||void 0===a[0]||null===a[0]?"":Object(i.jsxs)(i.Fragment,{children:[d.map((function(e){return"0"===e.replyTo?Object(i.jsx)("div",{children:Object(i.jsx)(h,{comment:e,id:e._id,getAllData:E,currentuser:a,comments:d,deletemodal:S,deletefromdb:M},e.id)},e.id):""})),Object(i.jsxs)("div",{className:"comment-window",children:[Object(i.jsx)("div",{className:"avatar",children:Object(i.jsx)("img",{alt:"avatar",src:n(19)(a[0].image.png)})}),Object(i.jsxs)("form",{onSubmit:function(e){var t=e.target[0].value;e.preventDefault();var n=[],c=(d.map((function(e){n.push(e.id)})),n.sort((function(e,t){return e-t}))),o={id:c[c.length-1]+1,content:t,createdAt:new Date,score:0,user:a[0],replyTo:"0"};p.post("https://nodeprojectreact.herokuapp.com/addcomment",{newcomment:o}).catch((function(e){alert("Error:",e)})).then((function(){O(""),E()}))},children:[Object(i.jsx)("textarea",{rows:"3",cols:"10",wrap:"hard",placeholder:"Add a comment...",onChange:function(e){O(e.target.value),e.preventDefault()},value:f}),Object(i.jsx)("input",{type:"submit",value:"SEND"})]})]}),x?Object(i.jsx)(l,{deletemodal:S,commentid:N,getalldata:E}):""]})}n(53);function f(){return Object(i.jsx)(b,{})}var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),o(e),r(e)}))};r.a.createRoot(document.getElementById("root")).render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(f,{})})),O()}},[[54,1,2]]]);
//# sourceMappingURL=main.ae7ea969.chunk.js.map